<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>3-Course Menu (€10.95)</title>
  <style>
    :root {
      --bg-light: #e6f0fa;
      --text-light: #002f6c;
      --card-bg: #ffffff;
      --accent: #1e90ff;
      --divider: #87ceeb;
      --flag-border: #ff4500;
    }
    *, *::before, *::after { box-sizing: border-box; }
    body { margin:0; padding:0; font-family:'Segoe UI',sans-serif; background:var(--bg-light); color:var(--text-light); }
    .container { max-width:1200px; margin:0 auto; padding:1rem; text-align:center; }
    .top-section { position:relative; background:var(--card-bg); padding:1rem 0 .5rem; overflow:hidden; }
    #menu-title { margin:0; font-size:2.5rem; color:var(--accent); position:relative; z-index:2; background:var(--bg-light); display:inline-block; padding:.25rem .75rem; border-radius:4px; }
    .lang-switcher { margin-top:.5rem; display:flex; flex-wrap:wrap; gap:.5rem; justify-content:center; position:relative; z-index:1; }
    .lang-switcher img { width:32px; height:20px; cursor:pointer; border:3px solid transparent; border-radius:50%; transition:transform .2s,border-color .2s; }
    .lang-switcher img.selected { transform:scale(1.2); border-color:var(--flag-border); }
    nav { margin:1rem 0; padding-bottom:.5rem; border-bottom:2px solid var(--divider); background:var(--bg-light); }
    nav a { margin:0 .75rem; padding-bottom:.25rem; color:var(--accent); font-weight:bold; text-decoration:none; position:relative; cursor:pointer; }
    nav a.active::after { content:''; position:absolute; bottom:-2px; left:0; right:0; height:3px; background:var(--accent); }
    .menu-section { display:none; margin:2rem 0; }
    .menu-section.active { display:block; }
    .menu-grid { display:grid; grid-template-columns:repeat(2,1fr); gap:1rem; margin-top:1rem; }
    .menu-item { background:var(--card-bg); padding:1rem; border-radius:8px; box-shadow:0 2px 4px rgba(0,0,0,.1); transition:transform .2s; text-align:center; }
    .menu-item:hover { transform:translateY(-4px); }
    .menu-item img { width:100%; border-radius:4px; margin-bottom:.5rem; }
    .menu-info h3 { margin:0; font-size:1.2rem; color:var(--text-light); }
  </style>
</head>
<body>
  <div class="container">
    <div class="top-section">
      <h1 id="menu-title">3-Course Menu (€10.95)</h1>
      <div class="lang-switcher">
        <img src="https://flagcdn.com/w80/gb.png" data-lang="en" onclick="switchLang('en')" title="English">
        <img src="https://flagcdn.com/w80/es.png" data-lang="es" onclick="switchLang('es')" title="Español">
        <img src="https://flagcdn.com/w80/de.png" data-lang="de" onclick="switchLang('de')" title="Deutsch">
        <img src="https://flagcdn.com/w80/fr.png" data-lang="fr" onclick="switchLang('fr')" title="Français">
        <img src="https://flagcdn.com/w80/nl.png" data-lang="nl" onclick="switchLang('nl')" title="Nederlands">
        <img src="https://flagcdn.com/w80/it.png" data-lang="it" onclick="switchLang('it')" title="Italiano">
        <img src="https://flagcdn.com/w80/ru.png" data-lang="ru" onclick="switchLang('ru')" title="Русский">
      </div>
    </div>
    <nav id="category-nav"></nav>
    <div id="menu"></div>
  </div>

  <script>
    let menuData = {}, currentLang = 'en', currentCategory = '';

    fetch('menuData.json')
      .then(r => r.json())
      .then(json => {
        menuData = json;
        updateTitle();
        document.documentElement.lang = currentLang;
        highlightFlag();
        renderMenu();
      });

    function switchLang(lang) {
      currentLang = lang;
      currentCategory = '';
      updateTitle();
      document.documentElement.lang = lang;
      highlightFlag();
      renderMenu();
    }

    function updateTitle() {
      const t = menuData[currentLang].title;
      document.getElementById('menu-title').textContent = t;
      document.title = t;
    }

    function highlightFlag() {
      document.querySelectorAll('.lang-switcher img')
        .forEach(img => img.classList.toggle('selected', img.dataset.lang === currentLang));
    }

    function renderMenu() {
      const data = menuData[currentLang];
      const nav = document.getElementById('category-nav'), menu = document.getElementById('menu');
      nav.innerHTML = ''; menu.innerHTML = '';

      Object.entries(data.categories).forEach(([key,label],idx) => {
        const a = document.createElement('a');
        a.textContent = label;
        a.onclick = () => {
          document.querySelectorAll('#category-nav a').forEach(x=>x.classList.remove('active'));
          a.classList.add('active');
          showCategory(key);
        };
        if ((idx===0 && !currentCategory) || key===currentCategory) {
          a.classList.add('active');
          currentCategory = key;
        }
        nav.appendChild(a);
      });

      Object.keys(data.categories).forEach(key => {
        const sec = document.createElement('div');
        sec.id = key; sec.className = 'menu-section';
        const grid = document.createElement('div');
        grid.className = 'menu-grid';
        (data.items[key]||[]).forEach(item => {
          const card = document.createElement('div');
          card.className = 'menu-item';
          const img = document.createElement('img');
          img.src = item.img;
          card.appendChild(img);
          const info = document.createElement('div');
          info.className = 'menu-info';
          info.innerHTML = `<h3>${item.name}</h3>`;
          card.appendChild(info);
          grid.appendChild(card);
        });
        sec.appendChild(grid);
        menu.appendChild(sec);
      });

      showCategory(currentCategory);
    }

    function showCategory(cat) {
      currentCategory = cat;
      document.querySelectorAll('.menu-section').forEach(s=>s.classList.remove('active'));
      const sec = document.getElementById(cat);
      if (sec) sec.classList.add('active');
    }
  </script>
</body>
</html>
